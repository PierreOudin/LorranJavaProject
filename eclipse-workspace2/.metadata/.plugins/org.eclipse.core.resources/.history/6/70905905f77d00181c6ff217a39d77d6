package controller;

import java.sql.SQLException;
import java.util.List;
import java.util.Scanner;

import model.Example;
import model.IModel;
import model.IMobile;
import controller.Player;
import view.IView;
import javax.swing.JPanel;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.KeyListener;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.image.BufferedImage;
import java.io.IOException;

/**
 * <h1>The Class ControllerFacade provides a facade of the Controller component.</h1>
 *
 * @author Jean-Aymeric DIET jadiet@cesi.fr
 * @version 1.0
 */
public class ControllerFacade extends JFrame 
implements IController, KeyListener, ActionListener

{

    /** The view. */
    private final IView  view;

    /** The model. */
    private final IModel model;

	private BufferedImage image;

    /**
     * Instantiates a new controller facade.
     *
     * @param view
     *            the view
     * @param model
     *            the model
     */
    public ControllerFacade(final IView view, final IModel model) {
        super();
        this.view = view;
        this.model = model;

    }

    /**
     * Start.
     * @return 
     *
     * @throws SQLException
     *             the SQL exception
     */
    
    public void Sprite(String image) {
        try {
            this.setImage(ImageIO.read(this.getClass().getClassLoader().getResourceAsStream(image)));
        } catch (IOException e) {
            System.err.println("Impossible to load the image"+image);
            e.printStackTrace();
        }
    }
    
    public void start() throws SQLException {
    	

        
        String letter = this.getModel().getExampleById(2).toString();


		int o = 0;
		
		
		JFrame frmM = new JFrame();
		frmM.setTitle("Lorran");
        frmM.setSize(new Dimension(770,500));
		frmM.setLocationRelativeTo(null);
		frmM.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frmM.setVisible(true);
        frmM.setResizable(false);
        JPanel pnlM = new JPanel();
        pnlM.setBackground(Color.BLACK);
        frmM.setContentPane(pnlM);
        addKeyListener(this);
        

         
        requestFocusInWindow();
    

    
        char map[][] = new char[992][992];
        map = IModel.getMap();
        
    	for (int i = 0 ; i < 12 ;i++)
        {
        	System.out.println("");
        	for (int y = 0; y <20; y++) {
        
                
        	switch (this.getModel().getExampleById(4).toString().charAt(o)) {

        	case '0':
            	
            	JLabel space = new JLabel();
                space.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\space.png"));
                pnlM.add(space);
                
                break;
            case '1':
            	
            	JLabel purse = new JLabel();
                purse.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\purse.png"));
                pnlM.add(purse);
                
                break;
                
            case '2': 
            	
            	JLabel lorann = new JLabel();
                lorann.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\lorann_r.png"));
                pnlM.add(lorann);
                
                break;
                
            case '3': 
            	
            	JLabel crystal_ball = new JLabel();
                crystal_ball.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\crystal_ball.png"));
                pnlM.add(crystal_ball);
                
                break;
                
            case '4': 
            	
            	JLabel fireball = new JLabel();
                fireball.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\fireball.png"));
                pnlM.add(fireball);
                
                break;
                
            case '5':
            	
            	JLabel gate_closed = new JLabel();
                gate_closed.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\gate_closed.png"));
                pnlM.add(gate_closed);
                
                break;
                
            case '6':
            	
            	JLabel gate_open = new JLabel();
                gate_open.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\gate_open.png"));
                pnlM.add(gate_open);
                
                break;
                
            case '7':
            	
            	JLabel vertical_bone = new JLabel();
                vertical_bone.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\vertical_bone.png"));
                pnlM.add(vertical_bone);
                
                break;
                
            case '8':
            	
                JLabel horizontal_bone = new JLabel();
                horizontal_bone.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\horizontal_bone.png"));
                pnlM.add(horizontal_bone);
                
                break;
                
            case '9':
            	
            	JLabel bone = new JLabel();
                bone.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\bone.png"));
                pnlM.add(bone);
                
                break;
                
            case 'A':
            	
            	JLabel monster_1 = new JLabel();
            	monster_1.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\monster_1.png"));
                pnlM.add(monster_1);
                
                break;
                
            case 'B':
            	
            	JLabel monster_2 = new JLabel();
            	monster_2.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\monster_2.png"));
                pnlM.add(monster_2);
                
                break;    
                
            case 'C':
            	
            	JLabel monster_3 = new JLabel();
            	monster_3.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\monster_3.png"));
                pnlM.add(monster_3);
                
                break;
                
            case 'D':
            	JLabel monster_4 = new JLabel();
            	monster_4.setIcon(new ImageIcon("C:\\Users\\buque\\Desktop\\sprite\\monster_4.png"));
                pnlM.add(monster_4);
                break;
                
            default:
                System.out.print("error");
        	
     
        	//System.out.print(letter.charAt(i));
        }
        	o++;		
        }
        	
        }
        
    	frmM.setContentPane(pnlM);
        frmM.setVisible(true);
        frmM.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        
    }
    /**
     * Gets the view.
     *
     * @return the view
     */
    public IView getView() {
        return this.view;
    }

    /**
     * Gets the model.
     *
     * @return the model
     */
    public IModel getModel() {
        return this.model;
    }

	public BufferedImage getImage() {
		return image;
	}

	public void setImage(BufferedImage image) {
		this.image = image;
	}
	
	 

    public void keyPressed(KeyEvent e) 
    {
     
        
        int keyCode = e.getKeyCode();
        
        //char map[][] = new char[992][992];
        //map = IModel.getMap();
        switch (keyCode) 
        {
            case KeyEvent.VK_UP: 
            	//Player.movePlayUp(52, 75, map);
            	System.out.println("up");
                break;
            case KeyEvent.VK_LEFT: 
            	//Player.movePlayLeft(52, 75, map);
            	System.out.println("left");
                break;
            case KeyEvent.VK_RIGHT: 
            	//Player.movePlayRight(52, 75, map);
            	System.out.println("right");
                break;
            case KeyEvent.VK_DOWN: 
            	//Player.movePlayDown(52, 75, map);
            	System.out.println("down");
                break;
        }
    }
 
    // Méthode redéfinie depuis KeyListener
    public void keyReleased(KeyEvent key)
    {
    	System.out.println("HA");
    }
 
    // Méthode redéfinie depuis KeyListener
    public void keyTyped(KeyEvent key)
    {
    	System.out.println("AH");
    }

	@Override
	public void actionPerformed(ActionEvent e) {
		// TODO Auto-generated method stub
		
	}

    
   
    
}
